# ุชูุนูู ูุธุงู ERP ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช

## โ ูุง ุชู ุฅูุฌุงุฒู

### 1. **Models ูู Backend** (MongoDB/Mongoose)

#### JournalEntry Model (`server/models/JournalEntry.ts`)
```typescript
- entryNumber: ุฑูู ุงูููุฏ (ุชูููุฏ ุชููุงุฆู JE-YYYY-XXXX)
- date: ุชุงุฑูุฎ ุงูููุฏ
- description: ุงููุตู
- lines: ุณุทูุฑ ุงูููุฏ (ูุฏูู/ุฏุงุฆู)
- totalDebit: ุฅุฌูุงูู ุงููุฏูู
- totalCredit: ุฅุฌูุงูู ุงูุฏุงุฆู
- status: ุงูุญุงูุฉ (draft, pending, approved, rejected)
- createdBy: ุงููููุดุฆ
- approvedBy: ุงููุนุชูุฏ
```

**ููุฒุงุช:**
- โ ุงูุชุญูู ุงูุชููุงุฆู ูู ุชูุงุฒู ุงูููุฏ (ุงููุฏูู = ุงูุฏุงุฆู)
- โ ุชูููุฏ ุฑูู ุงูููุฏ ุชููุงุฆูุงู
- โ ุชุชุจุน ุงูููุงููุงุช ูุงูุฑูุถ

#### Account Model (`server/models/Account.ts`)
```typescript
- code: ุฑูุฒ ุงูุญุณุงุจ
- name: ุงุณู ุงูุญุณุงุจ
- type: ุงูููุน (asset, liability, equity, revenue, expense)
- parentId: ุงูุญุณุงุจ ุงูุฃุจ (ูููููู ุงูุดุฌุฑู)
- level: ุงููุณุชูู ูู ุงูุดุฌุฑุฉ
- balance: ุงูุฑุตูุฏ
- debitBalance: ุฑุตูุฏ ูุฏูู
- creditBalance: ุฑุตูุฏ ุฏุงุฆู
```

**ููุฒุงุช:**
- โ ูููู ุดุฌุฑู ููุญุณุงุจุงุช
- โ ุญุณุงุจ ุงููุณุชูู ุชููุงุฆูุงู
- โ ุญุณุงุจ ุงูุฑุตูุฏ ุญุณุจ ุงูููุน

#### Expense Model (`server/models/Expense.ts`)
```typescript
- date: ุงูุชุงุฑูุฎ
- category: ุงููุฆุฉ
- description: ุงููุตู
- amount: ุงููุจูุบ
- status: ุงูุญุงูุฉ (draft, pending, paid, rejected)
- paymentMethod: ุทุฑููุฉ ุงูุฏูุน
- vendor: ุงูููุฑุฏ
- invoiceNumber: ุฑูู ุงููุงุชูุฑุฉ
```

**ููุฒุงุช:**
- โ ุชุชุจุน ุญุงูุฉ ุงูุฏูุน
- โ ุฑุจุท ูุน ุงููููุฏ ุงููุญุงุณุจูุฉ
- โ ูุฑููุงุช

---

### 2. **Controllers** (`server/controllers/erp.controller.ts`)

#### Dashboard Summary
```typescript
GET /api/erp/summary
```
**ูุญุณุจ:**
- ุฅุฌูุงูู ุงูุฅูุฑุงุฏุงุช (ูู Payments)
- ุฅุฌูุงูู ุงููุตุฑููุงุช (ูู Expenses)
- ุตุงูู ุงูุฑุจุญ
- ูุชูุณุท ุงูุฏูุนุฉ
- ุฅูุฑุงุฏุงุช ุงูููู/ุงูุดูุฑ/ุงูุณูุฉ
- ุนุฏุฏ ุงูุจูููุตุงุช

#### Journal Entries
```typescript
GET /api/erp/journal-entries?from=&to=&status=&page=&limit=
POST /api/erp/journal-entries
PUT /api/erp/journal-entries/:id/approve
```

#### Chart of Accounts
```typescript
GET /api/erp/accounts?type=&parentId=
POST /api/erp/accounts
```
**ูุจูู ุงููููู ุงูุดุฌุฑู ุชููุงุฆูุงู**

#### Expenses
```typescript
GET /api/erp/expenses?from=&to=&category=&status=&page=&limit=
POST /api/erp/expenses
PUT /api/erp/expenses/:id
DELETE /api/erp/expenses/:id
```
**ูุญุณุจ ุฅุญุตุงุฆูุงุช:**
- ุฅุฌูุงูู ุงููุตุฑููุงุช
- ุงููุฏููุน
- ุงููุนูู

---

### 3. **Routes** (`server/routes/erp.routes.ts`)

ุชู ุฅุถุงูุฉ ุฌููุน ุงูู endpoints ูุฑุจุทูุง ูู `server/index.ts`:
```typescript
app.use("/api/erp", erpRoutesNew);
```

---

### 4. **Frontend Integration**

#### FinanceDashboard
```typescript
useEffect(() => {
  const res = await api.get("/erp/summary");
  setSummary(res.data.data);
}, []);
```
โ ูุฌูุจ ุงูุฅุญุตุงุฆูุงุช ุงูุญููููุฉ ูู API

#### JournalEntries
```typescript
const loadEntries = async () => {
  const res = await api.get("/erp/journal-entries");
  setEntries(res.data.data);
};
```
โ ูุนุฑุถ ุงููููุฏ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### ChartOfAccounts
```typescript
const loadAccounts = async () => {
  const res = await api.get("/erp/accounts");
  setAccounts(res.data.data);
};
```
โ ูุนุฑุถ ุดุฌุฑุฉ ุงูุญุณุงุจุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### Expenses
```typescript
const loadExpenses = async () => {
  const res = await api.get("/erp/expenses");
  setExpenses(res.data.data);
};
```
โ ูุนุฑุถ ุงููุตุฑููุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

---

## ๐ ููู ูุนูู ุงููุธุงู

### 1. ุญุณุงุจ ุงูุฅูุฑุงุฏุงุช
```
ุงููุตุฏุฑ: Payment collection
ุงูุญููู: total, createdAt
ุงูููุชุฑุฉ: ุญุณุจ ุงูุณูุฉ/ุงูุดูุฑ/ุงูููู
```

### 2. ุญุณุงุจ ุงููุตุฑููุงุช
```
ุงููุตุฏุฑ: Expense collection
ุงูุญููู: amount, status, date
ุงูููุชุฑุฉ: status in ['paid', 'pending']
```

### 3. ุตุงูู ุงูุฑุจุญ
```
ุตุงูู ุงูุฑุจุญ = ุฅุฌูุงูู ุงูุฅูุฑุงุฏุงุช - ุฅุฌูุงูู ุงููุตุฑููุงุช
```

### 4. ูุชูุณุท ุงูุฏูุนุฉ
```
ูุชูุณุท ุงูุฏูุนุฉ = ุฅุฌูุงูู ุงูุฅูุฑุงุฏุงุช รท ุนุฏุฏ ุงูุฏูุนุงุช
```

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุชุดุบูู Backend
```bash
cd newback_sigurta
npm run dev
```

### 2. ุชุดุบูู Frontend
```bash
cd sigurta-finance-erp
npm run dev
```

### 3. ุงููุตูู ุฅูู ุงููุธุงู
1. ุณุฌู ุงูุฏุฎูู
2. ุงุถุบุท ุนูู "ูุธุงู ERP ุงููุงูู"
3. ุณุชุธูุฑ ุงูุฅุญุตุงุฆูุงุช ุงูุญููููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

---

## ๐ ุฅุถุงูุฉ ุจูุงูุงุช ุฃูููุฉ

### ุฅุถุงูุฉ ุญุณุงุจุงุช ุฃุณุงุณูุฉ
```bash
POST /api/erp/accounts
{
  "code": "1000",
  "name": "ุงูุฃุตูู",
  "type": "asset"
}
```

### ุฅุถุงูุฉ ููุฏ ูุญุงุณุจู
```bash
POST /api/erp/journal-entries
{
  "date": "2024-01-15",
  "description": "ููุฏ ุงูุชุชุงุญู",
  "lines": [
    {
      "accountId": "...",
      "accountName": "ุงูููุฏูุฉ",
      "accountCode": "1100",
      "debit": 1000000,
      "credit": 0
    },
    {
      "accountId": "...",
      "accountName": "ุฑุฃุณ ุงููุงู",
      "accountCode": "3000",
      "debit": 0,
      "credit": 1000000
    }
  ]
}
```

### ุฅุถุงูุฉ ูุตุฑูู
```bash
POST /api/erp/expenses
{
  "date": "2024-01-15",
  "category": "ุฑูุงุชุจ",
  "description": "ุฑูุงุชุจ ุงูููุธููู",
  "amount": 15000000,
  "status": "paid"
}
```

---

## ๐ ุชุฏูู ุงูุจูุงูุงุช

```
โโโโโโโโโโโโโโโโโโโ
โ   Payments      โ โโโ
โ  (ุงูุฅูุฑุงุฏุงุช)    โ   โ
โโโโโโโโโโโโโโโโโโโ   โ
                      โโโ> Dashboard Summary
โโโโโโโโโโโโโโโโโโโ   โ
โ   Expenses      โ โโโ
โ  (ุงููุตุฑููุงุช)    โ
โโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโ
โ JournalEntries  โ โโ> Journal Entries Page
โ  (ุงููููุฏ)       โ
โโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโ
โ   Accounts      โ โโ> Chart of Accounts Page
โ  (ุงูุญุณุงุจุงุช)     โ
โโโโโโโโโโโโโโโโโโโ
```

---

## โ ุงูููุฒุงุช ุงูููุนููุฉ

- โ Dashboard ูุนุฑุถ ุจูุงูุงุช ุญููููุฉ
- โ ุงููููุฏ ุงููุญุงุณุจูุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุดุฌุฑุฉ ุงูุญุณุงุจุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุงููุตุฑููุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุญุณุงุจ ุงูุฅุญุตุงุฆูุงุช ุชููุงุฆูุงู
- โ ุงูุชุญูู ูู ุชูุงุฒู ุงููููุฏ
- โ ุชูููุฏ ุฃุฑูุงู ุงููููุฏ ุชููุงุฆูุงู
- โ Pagination ููุจูุงูุงุช ุงููุจูุฑุฉ
- โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

---

## ๐ ุงูุฃูุงู

- โ ุฌููุน ุงูู endpoints ูุญููุฉ ุจู JWT
- โ `protect` middleware ุนูู ูู route
- โ ุชุชุจุน ุงููุณุชุฎุฏู ุงููููุดุฆ (`createdBy`)
- โ ุชุชุจุน ุงูููุงููุงุช (`approvedBy`)

---

## ๐ ุงูุฃุฏุงุก

- โ Indexes ุนูู ุงูุญููู ุงููููุฉ (date, status, category)
- โ Aggregation ููุฅุญุตุงุฆูุงุช
- โ Pagination ูููุชุงุฆุฌ ุงููุจูุฑุฉ
- โ Populate ููุท ููุญููู ุงููุทููุจุฉ

---

## ๐ฏ ุงูุฎุทูุงุช ุงููุงุฏูุฉ

### ุงููุฑุญูุฉ 1: ุงูุชูุงุฑูุฑ ุงููุชูุฏูุฉ
- [ ] ูุงุฆูุฉ ุงูุฏุฎู ูู ุงูุจูุงูุงุช ุงูุญููููุฉ
- [ ] ุงูููุฒุงููุฉ ุงูุนููููุฉ
- [ ] ุงูุชุฏููุงุช ุงูููุฏูุฉ

### ุงููุฑุญูุฉ 2: ุงูุฑุจุท ุงููุงูู
- [ ] ุฅูุดุงุก ููุฏ ูุญุงุณุจู ุชููุงุฆู ุนูุฏ ุฅุถุงูุฉ ูุตุฑูู
- [ ] ุชุญุฏูุซ ุฃุฑุตุฏุฉ ุงูุญุณุงุจุงุช ุชููุงุฆูุงู
- [ ] ุฑุจุท Payments ูุน ุงููููุฏ ุงููุญุงุณุจูุฉ

### ุงููุฑุญูุฉ 3: ุงูููุฒุงุช ุงูุฅุถุงููุฉ
- [ ] ููุงููุงุช ูุชุนุฏุฏุฉ ุงููุณุชููุงุช
- [ ] ุชูุงุฑูุฑ ูุฎุตุตุฉ
- [ ] ุฑุณูู ุจูุงููุฉ ุชูุงุนููุฉ
- [ ] ุชุตุฏูุฑ PDF

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ

1. **ุงูุจูุงูุงุช ุงูุฃูููุฉ**: ุงููุธุงู ูุนูู ูุน ูุงุนุฏุฉ ุจูุงูุงุช ูุงุฑุบุฉุ ููู ูู ุชุธูุฑ ุจูุงูุงุช ุญุชู ุชุถูู:
   - Payments (ููุฌูุฏุฉ ุจุงููุนู ูู ุงููุธุงู ุงูุฃุณุงุณู)
   - Expenses (ูุฌุจ ุฅุถุงูุชูุง)
   - Accounts (ูุฌุจ ุฅุถุงูุชูุง)
   - Journal Entries (ูุฌุจ ุฅุถุงูุชูุง)

2. **ุงูุฅูุฑุงุฏุงุช**: ูุชู ุญุณุงุจูุง ูู `Payment` collection ุงูููุฌูุฏุฉ

3. **ุงููุตุฑููุงุช**: ุชุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ุจูุงูุงุช ูู `Expense` collection

4. **ุงูุญุณุงุจุงุช**: ุชุญุชุงุฌ ุฅูู ุฅูุดุงุก ุดุฌุฑุฉ ุงูุญุณุงุจุงุช ุงูุฃุณุงุณูุฉ

---

## ๐๏ธ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฅุฐุง ูู ุชุธูุฑ ุจูุงูุงุช ูู Dashboard:
1. ุชุฃูุฏ ูู ูุฌูุฏ Payments ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
2. ุชุฃูุฏ ูู ุชุดุบูู Backend
3. ุชุญูู ูู Console ููุฃุฎุทุงุก

### ุฅุฐุง ูุงูุช ุงููููุฏ ูุงุฑุบุฉ:
- ุฃุถู ูููุฏ ุฌุฏูุฏุฉ ูู ุงููุงุฌูุฉ ุฃู API

### ุฅุฐุง ูุงูุช ุดุฌุฑุฉ ุงูุญุณุงุจุงุช ูุงุฑุบุฉ:
- ุฃุถู ุญุณุงุจุงุช ุฃุณุงุณูุฉ ุฃููุงู

---

ุชู ุงูุชูุนูู ุจูุฌุงุญ! ๐
ุงููุธุงู ุงูุขู ูุนูู ุจุงููุงูู ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุญููููุฉ.
